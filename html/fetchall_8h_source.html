<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mopatop: fetchall.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mopatop
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fetchall.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fetchall_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">* Multiscale Universal Interface Code Coupling Library Demo 8                *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">* Copyright (C) 2020 S. M. Longshaw                                          *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* This software is jointly licensed under the Apache License, Version 2.0    *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* and the GNU General Public License version 3, you may use it according     *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">* to either.                                                                 *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* ** Apache License, version 2.0 **                                          *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);            *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* you may not use this file except in compliance with the License.           *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">* You may obtain a copy of the License at                                    *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">* http://www.apache.org/licenses/LICENSE-2.0                                 *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">* Unless required by applicable law or agreed to in writing, software        *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,          *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">* See the License for the specific language governing permissions and        *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">* limitations under the License.                                             *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">* ** GNU General Public License, version 3 **                                *</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">* This program is free software: you can redistribute it and/or modify       *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">* it under the terms of the GNU General Public License as published by       *</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">* the Free Software Foundation, either version 3 of the License, or          *</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">* (at your option) any later version.                                        *</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">* This program is distributed in the hope that it will be useful,            *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">* but WITHOUT ANY WARRANTY; without even the implied warranty of             *</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the              *</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">* GNU General Public License for more details.                               *</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">*                                                                            *</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">* You should have received a copy of the GNU General Public License          *</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">* along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.      *</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">******************************************************************************/</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;../mui/mui.h&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;mui_config.h&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;omp.h&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classMUIcoupler.html">   74</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMUIcoupler.html">MUIcoupler</a> {</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">   76</a></span>&#160;    mui::uniface&lt;mui::mui_config&gt;* <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">   82</a></span>&#160;    mui::uniface&lt;mui::mui_config&gt;*<a class="code" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">flagInterface</a>;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">   84</a></span>&#160;    std::string <a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">   86</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a46252f544acbb1d697ac9b63cac8fbcb">   89</a></span>&#160;    <a class="code" href="classMUIcoupler.html#a46252f544acbb1d697ac9b63cac8fbcb">MUIcoupler</a>(){<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>=<span class="keyword">false</span>;};</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#ae482718825c942edaf89e8605be70dfe">   93</a></span>&#160;    <a class="code" href="classMUIcoupler.html#ae482718825c942edaf89e8605be70dfe">MUIcoupler</a>(std::string ident,<span class="keywordtype">bool</span> verby=<span class="keyword">false</span>):<a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>(ident),<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>(verby){</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">//ident is the subdomain of mpi - needs to be unique for every instance of the code</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        std::string iface=<span class="stringliteral">&quot;mpi://cough&quot;</span>+ident+<span class="stringliteral">&quot;/iface&quot;</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        std::string eface=<span class="stringliteral">&quot;mpi://cough&quot;</span>+ident+<span class="stringliteral">&quot;/flagInterface&quot;</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">//create the interface for transfer of data between 2 domains</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>=<span class="keyword">new</span> mui::uniface&lt;mui::mui_config&gt; ( iface.c_str() );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">flagInterface</a>=<span class="keyword">new</span> mui::uniface&lt;mui::mui_config&gt; ( eface.c_str() );</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//--------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a2b877d3e5c559805c3c0a05408b66b60">  103</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classMUIcoupler.html#a2b877d3e5c559805c3c0a05408b66b60">push_data</a>(<span class="keywordtype">int</span> travelType, mui::point&lt;mui::mui_config::REAL, 1&gt;loc, <a class="code" href="classagent.html">agent</a>* a){</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">//send whether agent is local or traveller</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(travelType)  );</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">//send agent ID</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(a-&gt;<a class="code" href="classagent.html#a62a990a10e6ae56efd22acf21eb1fb4c">getID</a>())  );</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">//...send other necessary data here...make sure it matches below in pull_data</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(a-&gt;<a class="code" href="classagent.html#acb6d783c6762c0854e43103e0732e5d9">alive</a>())  );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(a-&gt;<a class="code" href="classagent.html#a6d0998f503a9e3795c31cac4e09462d3">diseased</a>())  );</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(a-&gt;<a class="code" href="classagent.html#a8e00c2f67a1ad5ca6950c10e79541d1c">immune</a>())  );</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;push( <span class="stringliteral">&quot;data&quot;</span>, loc, static_cast&lt;mui::mui_config::REAL&gt;(a-&gt;<a class="code" href="classagent.html#a7f196aa0eea3191bfdadc77d1fe931ba">recovered</a>())  ); </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//--------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a7ae056a42e46a60e7564e7f7b3d01bdb">  117</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classMUIcoupler.html#a7ae056a42e46a60e7564e7f7b3d01bdb">pull_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp; i, <a class="code" href="classagent.html">agent</a>* a,std::vector&lt;double&gt;&amp; fetch_vals){</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment">//use the data fetched from the remote domain to set values in the agents here</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">//one i++ and one line here to correspond to each in push_data above  (NB travelType and ID already set below)      </span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        i++;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        a-&gt;<a class="code" href="classagent.html#a1237d4d288e90a41d07cecb9318766c6">setAlive</a>((<span class="keywordtype">bool</span>)fetch_vals[i]);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        i++;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        a-&gt;<a class="code" href="classagent.html#aa579ca764d0a5b59968af4996f41d5c2">setDiseased</a>((<span class="keywordtype">bool</span>)fetch_vals[i]);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        i++;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        a-&gt;<a class="code" href="classagent.html#a0a2ddd7fab0a36c8036e0d968a53031f">setImmune</a>((<span class="keywordtype">bool</span>)fetch_vals[i]);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        i++;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        a-&gt;<a class="code" href="classagent.html#acf93416b3ebacefd71d4576bd0461c4f">setRecovered</a>((<span class="keywordtype">bool</span>)fetch_vals[i]);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">//--------------------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classMUIcoupler.html#a01b969d9ca7ed6f295426da6ab657803">  156</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classMUIcoupler.html#a01b969d9ca7ed6f295426da6ab657803">exchange</a>(<span class="keywordtype">int</span> time,std::vector&lt;agent*&gt;&amp; locals,std::vector&lt;agent*&gt;&amp; travellers,<span class="keywordtype">bool</span> leavers){</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// Declare MUI interface and samplers using templates in config.h</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// note: please update types stored in default_config in config.h first to 1-dimensional before compilation</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">//no time interpolation - just exactly copy values at each time step</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        mui::chrono_sampler_exact&lt;mui::mui_config&gt; chrono_sampler;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        mui::point&lt;mui::mui_config::REAL, 1&gt; push_loc;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">//push the leavers flag to the other domain - leavers is 1 if this domain has any data to send - at the moment I ony seem to be able to send real values assocaited with a &quot;data point&quot;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">//hence the extra zero value and the casts</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">flagInterface</a>-&gt;push( <span class="stringliteral">&quot;Check&quot;</span>,  static_cast&lt;mui::mui_config::REAL&gt;(0), static_cast&lt;mui::mui_config::REAL&gt;(leavers)  );</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">flagInterface</a>-&gt;commit(time);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">//get the flag - again I only seem to be able to receive at a given time into a vector, even if there is only one value</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//std::vector&lt;mui::point&lt;mui::mui_config::REAL, 1&gt;&gt; flag_locs = flagInterface-&gt;fetch_points&lt;mui::mui_config::REAL&gt;( &quot;Check&quot;, time, chrono_sampler ); // Extract the locations stored in the interface at time</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        std::vector&lt;double&gt; received_flag_value = <a class="code" href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">flagInterface</a>-&gt;fetch_values&lt;<a class="code" href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a>&gt;( <span class="stringliteral">&quot;Check&quot;</span>, time, chrono_sampler );</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">//only do the full data exchange if either this domain has some data to send, or the flag received from the other domain is non zero (i.e. it wants to send data)</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">//since we have cast bools to doubles, use 0.5 as the check to guarantee we don&#39;t have trouble with values being some tiny amount greater than zero.</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keywordflow">if</span> ((received_flag_value[0]+(<span class="keywordtype">double</span>)leavers)&gt;0.5){</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">// Push values to the MUI interface - at the moment it seems all values have to be cast to doubles??</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        </div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// For each value sent, the receiver will get (in order) a copy of the location and then the value</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">//TODO set up the airplane (or other vehicle) to carry the agent at each end, in a way that can generalize to more than two domains, and that knows the domain.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">//count of agents moved this time</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordtype">unsigned</span> count=0;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// store a mapping from agent IDs to index in locals */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    std::map&lt;unsigned long,unsigned long&gt; identities;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i=0; i&lt;locals.size(); i++) { <span class="comment">//</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">//need to store the index value currently associated with inactive agents for retrieving travellers below</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">//note this might not be the index they originally had when they first left the domain...</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (!locals[i]-&gt;active())identities[locals[i]-&gt;getID()]=i;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="comment">//loop over all locals  leavers- agents that normally reside on this domain may decide to leave</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">//leavers vector holds the indices into the locals vector</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (locals[i]-&gt;leaver()){</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="comment">//push leaver data</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            count++;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="comment">//local copy on this domain pauses</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            locals[i]-&gt;deactivate();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="comment">//once the agent has crossed to the other side, it shouldn&#39;t try again! - until its schedule says so in the main model</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            locals[i]-&gt;doNotLeaveDomain();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="comment">//currently use i to label the agent - OK since here we loop over all agents, and immediately fetch below</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            push_loc = <span class="keyword">static_cast&lt;</span><a class="code" href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a><span class="keyword">&gt;</span>(i);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="comment">//locals going travelling are labelled with a zero</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="classMUIcoupler.html#a2b877d3e5c559805c3c0a05408b66b60">push_data</a>(0,push_loc,locals[i]);            </div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">//Now check if travellers are on the way home from this domain</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">//we keep the vector of travellers so that they can be re-used for other agents rather than re-allocating memory (which tends to be slow).</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">//once in a while it might be good to clean things out??</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i=0; i&lt;travellers.size(); i++) { <span class="comment">//temporary travellers may go home</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (travellers[i]-&gt;leaver()){</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            count++;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">//local copy on this domain pauses - this traveller can be re-used if necessary</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            travellers[i]-&gt;deactivate();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">//once the agent has crossed to the other side, it shouldn&#39;t try again! - unless it gets re-used to represent another agent from the remote domain</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            travellers[i]-&gt;doNotLeaveDomain();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="comment">//dummy location - not used at the far end as the agent is crossing back to its own original domain</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            push_loc = <span class="keyword">static_cast&lt;</span><a class="code" href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a><span class="keyword">&gt;</span>(i);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">//returning travellers are labelled with a 2</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="classMUIcoupler.html#a2b877d3e5c559805c3c0a05408b66b60">push_data</a>(2,push_loc,travellers[i]); </div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)std::cout&lt;&lt;<span class="stringliteral">&quot;Domain &quot;</span>&lt;&lt;<a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>&lt;&lt;<span class="stringliteral">&quot;: counted &quot;</span>&lt;&lt;count&lt;&lt;<span class="stringliteral">&quot; leavers at step &quot;</span>&lt;&lt;time&lt;&lt;std::endl;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    </div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Commit (transmit by MPI) the values at time</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;commit( time );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">//===================================================================================</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">//Fetch the values from the interface using the fetch_points and fetch_values methods</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">//====================================================================================</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// (blocking until data at &quot;t=time&quot; exists according to chrono_sampler)</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    std::vector&lt;mui::point&lt;mui::mui_config::REAL, 1&gt;&gt; fetch_locs = <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;fetch_points&lt;<a class="code" href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a>&gt;( <span class="stringliteral">&quot;data&quot;</span>, time, chrono_sampler ); <span class="comment">// Extract the locations stored in the interface at time</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    std::vector&lt;double&gt; fetch_vals = <a class="code" href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">interface</a>-&gt;fetch_values&lt;<a class="code" href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a>&gt;( <span class="stringliteral">&quot;data&quot;</span>, time, chrono_sampler ); <span class="comment">// Extract the values stored in the interface at time</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)std::cout&lt;&lt;<span class="stringliteral">&quot;Domain:&quot;</span>&lt;&lt; <a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>&lt;&lt;<span class="stringliteral">&quot; Total number of data elements fetched &quot;</span>&lt;&lt;fetch_locs.size()&lt;&lt;std::endl;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// All values for all agents, both returning locals and new travellers are all packed together, new travellers first (labelled with 0 as the first data element)</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    </div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//These are the travellers on this domain that can be re-used, since they have been inactivated</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    std::vector&lt;unsigned long&gt;indx;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i=0;i&lt;travellers.size();i++){</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span>( !travellers[i]-&gt;active())indx.push_back(i);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">//count of agents moved this time</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    count=0;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">//index into </span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> reuser=0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">//iterator over ALL data elements transferred</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i=0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">while</span> (i&lt;fetch_locs.size()) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">//locals from the other domain that are travellers to here - this initializes the travellers.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> (fetch_vals[i]&lt;1){</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            count++;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            i++;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="classagent.html">agent</a>* a;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (reuser&lt;indx.size()){</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                a=travellers[indx[reuser]];<span class="comment">//use the free indices into travellers to find agents that can be overwritten with new data</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                reuser++;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                a=<span class="keyword">new</span> <a class="code" href="classagent.html">agent</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                travellers.push_back(a);<span class="comment">//only needed if no free inactive travellers </span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)printf( <span class="stringliteral">&quot;domain %s fetched value %lf at location %lf time %d \n&quot;</span>, <a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>.c_str(), fetch_vals[i], fetch_locs[i][0],time );</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)std::cout&lt;&lt;<span class="stringliteral">&quot;I am a passenger, and I ride and I ride&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            a-&gt;<a class="code" href="classagent.html#a347d8226bc8982c3ba8d9e61de433a9c">setID</a>(fetch_vals[i]);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            a-&gt;<a class="code" href="classagent.html#a8fed87772396add58de66881a45a0ee0">activate</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            a-&gt;<a class="code" href="classagent.html#a78efdfc00e3fca4ff5c0cb87e3a74b15">outwardTravel</a>();<span class="comment">//sets the local place pointers and schedule.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            a-&gt;<a class="code" href="classagent.html#a6a74677c0bb2b06cf0ba86b1145e4a46">setRemoteLocation</a>();<span class="comment">//agent will leave domain at end of travel schedule</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="comment">//...copy in necessary data...one value for each after the ID</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="classMUIcoupler.html#a7ae056a42e46a60e7564e7f7b3d01bdb">pull_data</a>(i,a,fetch_vals);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">//travellers from the other domain that are coming home</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            count++;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            i++;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)printf( <span class="stringliteral">&quot;domain %s fetched value %lf at location %lf time %d \n&quot;</span>, <a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>.c_str(), fetch_vals[i], fetch_locs[i][0],time );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)std::cout&lt;&lt;<span class="stringliteral">&quot;You&#39;re going, you&#39;re going home&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">//identities labelled the agent&#39;s place in the local domain agent vector - check this is true! NB IDs are only valid in original domain</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            assert(locals[identities[fetch_vals[i]]]-&gt;getID()==(<span class="keywordtype">long</span>)fetch_vals[i]);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="classagent.html">agent</a>* a=locals[identities[fetch_vals[i]]];</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            a-&gt;<a class="code" href="classagent.html#a8fed87772396add58de66881a45a0ee0">activate</a>();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            a-&gt;<a class="code" href="classagent.html#a92a9879e7cc0426f6f8873401230730e">inwardTravel</a>();<span class="comment">//sets up return journey</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="comment">//...copy in modified data...one value for each after the ID</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <a class="code" href="classMUIcoupler.html#a7ae056a42e46a60e7564e7f7b3d01bdb">pull_data</a>(i,a,fetch_vals);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        i++;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">verbose</a>)std::cout&lt;&lt;<span class="stringliteral">&quot;Domain &quot;</span>&lt;&lt;<a class="code" href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">domain</a>&lt;&lt;<span class="stringliteral">&quot;: counted &quot;</span>&lt;&lt;count&lt;&lt;<span class="stringliteral">&quot; arrivals at step &quot;</span>&lt;&lt;time&lt;&lt;std::endl;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;};</div><div class="ttc" id="classMUIcoupler_html_a39e98861fb9d2966f2cc9acfdca7f6fb"><div class="ttname"><a href="classMUIcoupler.html#a39e98861fb9d2966f2cc9acfdca7f6fb">MUIcoupler::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">set to true to print out (lots of) diagnostic info - only really for debug/test purposes ...</div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00086">fetchall.h:86</a></div></div>
<div class="ttc" id="classagent_html_acb6d783c6762c0854e43103e0732e5d9"><div class="ttname"><a href="classagent.html#acb6d783c6762c0854e43103e0732e5d9">agent::alive</a></div><div class="ttdeci">bool alive()</div><div class="ttdoc">check if the agent is alive </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00209">agent.h:209</a></div></div>
<div class="ttc" id="classagent_html_a78efdfc00e3fca4ff5c0cb87e3a74b15"><div class="ttname"><a href="classagent.html#a78efdfc00e3fca4ff5c0cb87e3a74b15">agent::outwardTravel</a></div><div class="ttdeci">void outwardTravel()</div><div class="ttdoc">set up the schedule for travelling away </div><div class="ttdef"><b>Definition:</b> <a href="agent_8cpp_source.html#l00155">agent.cpp:155</a></div></div>
<div class="ttc" id="classagent_html_a0a2ddd7fab0a36c8036e0d968a53031f"><div class="ttname"><a href="classagent.html#a0a2ddd7fab0a36c8036e0d968a53031f">agent::setImmune</a></div><div class="ttdeci">void setImmune(bool immunity)</div><div class="ttdoc">set immunity - for use with agent copying </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00217">agent.h:217</a></div></div>
<div class="ttc" id="classMUIcoupler_html_af72c7f2e13356a47f4b89eae10b04bba"><div class="ttname"><a href="classMUIcoupler.html#af72c7f2e13356a47f4b89eae10b04bba">MUIcoupler::flagInterface</a></div><div class="ttdeci">mui::uniface&lt; mui::mui_config &gt; * flagInterface</div><div class="ttdoc">a second interface, used to check whether there is any significant data to exchange ...</div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00082">fetchall.h:82</a></div></div>
<div class="ttc" id="classagent_html_aa579ca764d0a5b59968af4996f41d5c2"><div class="ttname"><a href="classagent.html#aa579ca764d0a5b59968af4996f41d5c2">agent::setDiseased</a></div><div class="ttdeci">void setDiseased(bool diseased)</div><div class="ttdoc">set disease state - for use with agent copying </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00221">agent.h:221</a></div></div>
<div class="ttc" id="classagent_html_a6d0998f503a9e3795c31cac4e09462d3"><div class="ttname"><a href="classagent.html#a6d0998f503a9e3795c31cac4e09462d3">agent::diseased</a></div><div class="ttdeci">bool diseased()</div><div class="ttdoc">report whether infected with the disease </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00183">agent.h:183</a></div></div>
<div class="ttc" id="classMUIcoupler_html_a2b877d3e5c559805c3c0a05408b66b60"><div class="ttname"><a href="classMUIcoupler.html#a2b877d3e5c559805c3c0a05408b66b60">MUIcoupler::push_data</a></div><div class="ttdeci">void push_data(int travelType, mui::point&lt; mui::mui_config::REAL, 1 &gt;loc, agent *a)</div><div class="ttdoc">The data to be pushed from this domain to the remote domain on the other thread, for each agent...</div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00103">fetchall.h:103</a></div></div>
<div class="ttc" id="classagent_html_a7f196aa0eea3191bfdadc77d1fe931ba"><div class="ttname"><a href="classagent.html#a7f196aa0eea3191bfdadc77d1fe931ba">agent::recovered</a></div><div class="ttdeci">bool recovered()</div><div class="ttdoc">report whether recovered from the disease </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00187">agent.h:187</a></div></div>
<div class="ttc" id="classagent_html_a6a74677c0bb2b06cf0ba86b1145e4a46"><div class="ttname"><a href="classagent.html#a6a74677c0bb2b06cf0ba86b1145e4a46">agent::setRemoteLocation</a></div><div class="ttdeci">void setRemoteLocation()</div><div class="ttdoc">set a flag to indicate there&amp;#39;s a need to move to another domain </div><div class="ttdef"><b>Definition:</b> <a href="agent_8cpp_source.html#l00145">agent.cpp:145</a></div></div>
<div class="ttc" id="classagent_html_a8fed87772396add58de66881a45a0ee0"><div class="ttname"><a href="classagent.html#a8fed87772396add58de66881a45a0ee0">agent::activate</a></div><div class="ttdeci">void activate()</div><div class="ttdoc">agent will resume activity   </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00308">agent.h:308</a></div></div>
<div class="ttc" id="classMUIcoupler_html_a7ae056a42e46a60e7564e7f7b3d01bdb"><div class="ttname"><a href="classMUIcoupler.html#a7ae056a42e46a60e7564e7f7b3d01bdb">MUIcoupler::pull_data</a></div><div class="ttdeci">void pull_data(unsigned long &amp;i, agent *a, std::vector&lt; double &gt; &amp;fetch_vals)</div><div class="ttdoc">The data to be received on this domain from the remote domain on the other thread, for each agent, but excluding agent ID and traveller indicator. </div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00117">fetchall.h:117</a></div></div>
<div class="ttc" id="classagent_html_a1237d4d288e90a41d07cecb9318766c6"><div class="ttname"><a href="classagent.html#a1237d4d288e90a41d07cecb9318766c6">agent::setAlive</a></div><div class="ttdeci">void setAlive(bool life)</div><div class="ttdoc">set life level - for use with agent copying </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00213">agent.h:213</a></div></div>
<div class="ttc" id="classMUIcoupler_html_a46252f544acbb1d697ac9b63cac8fbcb"><div class="ttname"><a href="classMUIcoupler.html#a46252f544acbb1d697ac9b63cac8fbcb">MUIcoupler::MUIcoupler</a></div><div class="ttdeci">MUIcoupler()</div><div class="ttdoc">default constructor - not used in practice </div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00089">fetchall.h:89</a></div></div>
<div class="ttc" id="classMUIcoupler_html_ae240973bfb0490f3a6dcf43d42cb5a51"><div class="ttname"><a href="classMUIcoupler.html#ae240973bfb0490f3a6dcf43d42cb5a51">MUIcoupler::domain</a></div><div class="ttdeci">std::string domain</div><div class="ttdoc">the name of this domain - unique to each mpi thread </div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00084">fetchall.h:84</a></div></div>
<div class="ttc" id="classagent_html_a347d8226bc8982c3ba8d9e61de433a9c"><div class="ttname"><a href="classagent.html#a347d8226bc8982c3ba8d9e61de433a9c">agent::setID</a></div><div class="ttdeci">void setID(long i)</div><div class="ttdoc">set agent ID number   </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00277">agent.h:277</a></div></div>
<div class="ttc" id="classagent_html_a8e00c2f67a1ad5ca6950c10e79541d1c"><div class="ttname"><a href="classagent.html#a8e00c2f67a1ad5ca6950c10e79541d1c">agent::immune</a></div><div class="ttdeci">bool immune()</div><div class="ttdoc">report whether immune to the disease </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00191">agent.h:191</a></div></div>
<div class="ttc" id="classMUIcoupler_html_ae482718825c942edaf89e8605be70dfe"><div class="ttname"><a href="classMUIcoupler.html#ae482718825c942edaf89e8605be70dfe">MUIcoupler::MUIcoupler</a></div><div class="ttdeci">MUIcoupler(std::string ident, bool verby=false)</div><div class="ttdoc">constructor - sets up the interface connecting the two MPI domains (threads) </div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00093">fetchall.h:93</a></div></div>
<div class="ttc" id="classagent_html_a62a990a10e6ae56efd22acf21eb1fb4c"><div class="ttname"><a href="classagent.html#a62a990a10e6ae56efd22acf21eb1fb4c">agent::getID</a></div><div class="ttdeci">unsigned long getID()</div><div class="ttdoc">get agent ID number   </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00282">agent.h:282</a></div></div>
<div class="ttc" id="structmui_1_1mui__config_html_a0713e4391eac95397486c1ee895f552f"><div class="ttname"><a href="structmui_1_1mui__config.html#a0713e4391eac95397486c1ee895f552f">mui::mui_config::REAL</a></div><div class="ttdeci">double REAL</div><div class="ttdoc">MUI type define. </div><div class="ttdef"><b>Definition:</b> <a href="mui__config_8h_source.html#l00056">mui_config.h:56</a></div></div>
<div class="ttc" id="classMUIcoupler_html_a8000d0c04bc72dcee64ed83378bbb0a6"><div class="ttname"><a href="classMUIcoupler.html#a8000d0c04bc72dcee64ed83378bbb0a6">MUIcoupler::interface</a></div><div class="ttdeci">mui::uniface&lt; mui::mui_config &gt; * interface</div><div class="ttdoc">the interface for exchanging data, using the configuration in config.h </div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00076">fetchall.h:76</a></div></div>
<div class="ttc" id="classagent_html_acf93416b3ebacefd71d4576bd0461c4f"><div class="ttname"><a href="classagent.html#acf93416b3ebacefd71d4576bd0461c4f">agent::setRecovered</a></div><div class="ttdeci">void setRecovered(bool recovery)</div><div class="ttdoc">set recovery state - for use with agent copying </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00225">agent.h:225</a></div></div>
<div class="ttc" id="classMUIcoupler_html_a01b969d9ca7ed6f295426da6ab657803"><div class="ttname"><a href="classMUIcoupler.html#a01b969d9ca7ed6f295426da6ab657803">MUIcoupler::exchange</a></div><div class="ttdeci">void exchange(int time, std::vector&lt; agent *&gt; &amp;locals, std::vector&lt; agent *&gt; &amp;travellers, bool leavers)</div><div class="ttdoc">check through all agents looking for exchanges and then transferring a subset of data as defined by p...</div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00156">fetchall.h:156</a></div></div>
<div class="ttc" id="classagent_html_a92a9879e7cc0426f6f8873401230730e"><div class="ttname"><a href="classagent.html#a92a9879e7cc0426f6f8873401230730e">agent::inwardTravel</a></div><div class="ttdeci">void inwardTravel()</div><div class="ttdoc">set up the schedule for returning home </div><div class="ttdef"><b>Definition:</b> <a href="agent_8cpp_source.html#l00149">agent.cpp:149</a></div></div>
<div class="ttc" id="classagent_html"><div class="ttname"><a href="classagent.html">agent</a></div><div class="ttdoc">The main agent class - each agent represents one person. </div><div class="ttdef"><b>Definition:</b> <a href="agent_8h_source.html#l00046">agent.h:46</a></div></div>
<div class="ttc" id="classMUIcoupler_html"><div class="ttname"><a href="classMUIcoupler.html">MUIcoupler</a></div><div class="ttdoc">This class defines an interface for two copies of the model running on different MPI threads...</div><div class="ttdef"><b>Definition:</b> <a href="fetchall_8h_source.html#l00074">fetchall.h:74</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
